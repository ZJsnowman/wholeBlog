---
title: 爬虫
date: 2017-12-05 11:23:09
tags:
---



## 学习资料
https://mp.weixin.qq.com/s/VNUaXDIXkoY55kPLZzvDNw

##Scrapy
### 安装
`conda install -c conda-forge scrapy`
### 创建工程
`scrapy startproject ArticleSpider`
### 配置 Pycharm使其可以断点 Scrapy
添加一个 main 函数,通过 scrapy.cmd.execute 来执行 scrapy 命令行
### XPath 语法
[XPath 语法](http://www.w3school.com.cn/xpath/xpath_syntax.asp)

*ps:如果你只想获得第一个匹配的，可以使用.extract_first()*

### tips
```python
from urllib import parse
parse.urljoin(base, url) # 在某些提取到到 href是一个相对路径是需要手动组装 url
```
![](https://ws4.sinaimg.cn/large/006tNc79gy1foykdbiw7wj31kw0bwwfc.jpg)
利用 scrapy 自带的 ImagesPipeline快速完成图片下载以及下载格式设置

pipLine 主要用来做数据存储

python3 里所有的字符都是 unicode, 需要 encode 才能被某些函数接受

codecs 来完成文件的打开和写入,可以避免很多文件编码的问题
mysql varchar 必须制定长度,很长的内容可以用 longtext 类型,不用指定长度

可以利用scrapy的 adbapi 可以实现异步存 mysql.
