---
title: Vi使用备注
date: 2017-08-08 09:46:55
tags: [others]
---
在某些时候确实没有太适合的编辑器的,只能使用vi.掌握一些基本的vi使用还是非常
有必要的.这里记录一下自己使用vi的一些笔记<!--more-->

# 一些基本设置
## vi显示行号
- 临时显示行号:`set nu`

- 永久显示行号,在~/.vimrc 中写入
```
"显示行号
set nu
```
ps:双引号是注释

## 跳转行号
- NG → 到第 N 行 也可以使用 : N 到第N行，如 :137 到第137行）
- gg → 到第一行。（陈皓注：相当于1G，或 :1）
- G → 到最后一行

## 移动光标
- 0 → 数字零，到行头
- $ → 到本行行尾
- ^ → 到本行第一个不是blank字符的位置（所谓blank字符就是空格，tab，换行，回车等）
- g_ → 到本行最后一个不是blank字符的位置。
- /pattern → 搜索 pattern 的字符串（陈皓注：如果搜索出多个匹配，可按n键到下一个）

## Undo/Redo
- u → undo
- Ctrl + r → redo
- U  输入大写 U 撤销对整行的修改

### 学习链接
[浩哥的vim简明教程](http://coolshell.cn/articles/5426.html)

# Vimtutor
```
i   输入欲插入文本   <ESC>             在光标前插入文本
A   输入欲添加文本   <ESC>             在一行后添加文本
```
w - 从当前光标当前位置直到下一个单词起始处，不包括它的第一个字符。
e - 从当前光标当前位置直到单词末尾，包括最后一个字符。
$ - 从当前光标当前位置直到当前行末。
0 - 从当前光标当前位置直到行首


## 删除与撤销
1. 欲从当前光标删除至下一个单词，请输入：dw
2. 欲从当前光标删除至当前行末尾，请输入：d$
3. 欲删除整行，请输入：dd
4. 欲重复一个动作，请在它前面加上一个数字：2w
5. 在正常模式下修改命令的格式是：
`operator   [number]   motion`
其中：
operator - 操作符，代表要做的事情，比如 d 代表删除
[number] - 可以附加的数字，代表动作重复的次数
motion   - 动作，代表在所操作的文本上的移动，例如 w 代表单词(word)，
$ 代表行末等等。

6. 欲移动光标到行首，请按数字0键：0
7. 欲撤消以前的操作，请输入：u (小写的u)
欲撤消在一行中所做的改动，请输入：U (大写的U)
欲撤消以前的撤消命令，恢复以前的操作结果，请输入：CTRL-r


## 置换和更改
1. 要重新置入已经删除的文本内容，请按小写字母 p 键。该操作可将以已删除
    的文本内容置于光标之后。如果最后一次删除的是一个整行，那么该行将置
    于当前光标所在行的下一行。

2. 要替换光标所在位置的字符，请输入小写的 r 和要替换掉原位置字符的新字
    符即可。

3. 更改类命令允许您改变从当前光标所在位置直到动作指示的位置中间的文本。
    比如输入 ce 可以替换当前光标到单词的末尾的内容；输入 c$ 可以替换当
    前光标到行末的内容。

4. 更改类命令的格式是：

  ```
  c   [number]   motion
  ```

## 替换
-  如果光标当前位置是括号(、)、[、]、{、}，按 % 会将光标移动到配对的括号上。
-  在一行内替换头一个字符串 old 为新的字符串 new，请输入  :s/old/new
-  在一行内替换所有的字符串 old 为新的字符串 new，请输入  :s/old/new/g
-  在两行内替换所有的字符串 old 为新的字符串 new，请输入  :#,#s/old/new/g
-  在文件内替换所有的字符串 old 为新的字符串 new，请输入  :%s/old/new/g
-  进行全文替换时询问用户确认每个替换需添加 c 标志        :%s/old/new/gc

## 总结
1. `:!command` 用于执行一个外部命令 command。

     请看一些实际例子：
         (MS-DOS)         (Unix)
          :!dir            :!ls            -  用于显示当前目录的内容。
          :!del FILENAME   :!rm FILENAME   -  用于删除名为 FILENAME 的文件。
2. :w FILENAME  可将当前 VIM 中正在编辑的文件保存到名为 FILENAME 的文
     件中。

3. v motion :w FILENAME 可将当前编辑文件中可视模式下选中的内容保存到文件
     FILENAME 中。

4. :r FILENAME 可提取磁盘文件 FILENAME 并将其插入到当前文件的光标位置
     后面。

5. :r !dir 可以读取 dir 命令的输出并将其放置到当前文件的光标位置后面。
6. 输入小写的 o 可以在光标下方打开新的一行并进入插入模式。
   输入大写的 O 可以在光标上方打开新的一行。

7. 输入小写的 a 可以在光标所在位置之后插入文本。
   输入大写的 A 可以在光标所在行的行末之后插入文本。

8. e 命令可以使光标移动到单词末尾。

9. 操作符 y 复制文本，p 粘贴先前复制的文本。

10. 输入大写的 R 将进入替换模式，直至按 <ESC> 键回到正常模式。

11. 输入 :set xxx 可以设置 xxx 选项。一些有用的选项如下：
      'ic' 'ignorecase'       查找时忽略字母大小写
      'is' 'incsearch'        查找短语时显示部分匹配
      'hls' 'hlsearch'        高亮显示所有的匹配短语
   选项名可以用完整版本，也可以用缩略版本。

12. 在选项前加上 no 可以关闭选项：  :set noic



# Vim Cheatsheet
[Vim 快捷键](http://zjsnowman.com/local/vim.txt)
